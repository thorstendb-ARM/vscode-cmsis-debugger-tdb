<?xml version="1.0" encoding="utf-8"?>
<component_viewer schemaVersion="0.1" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:noNamespaceSchemaLocation="Component_Viewer.xsd">
  <component name="RTOS" version="5.0.0"/>    <!-- name and version of the component  -->

  <typedefs>

    <typedef name="memberTest_t" info="" size="10" import="mySymbol">
      <member name="a" type="uint8_t" offset="0"  info="Member a"/>
      <member name="b" type="uint8_t" offset="1"  info="Member b"/>
      <member name="c" type="uint8_t" offset="2"  info="Member c"/>
      <member name="d" type="uint8_t" offset="3"  info="Member d"/>
      <member name="A" type="uint8_t"  info="Member noOffset A"/>
      <member name="B" type="uint8_t"  info="Member noOffset B"/>
      <member name="C" type="uint8_t"  info="Member noOffset C"/>
      <member name="D" type="uint8_t"  info="Member noOffset D"/>
      
      <var name="sum"     type="uint32_t"  info="Member sum"/>
      <var name="m_var1" type="uint32_t" info="Member Variable 1"/>
      <var name="m_var2" type="uint16_t" info="Member Variable 2"/>
      <var name="m_var3" type="uint32_t" info="Member Variable 3"/>
    </typedef>

    <!-- OS Runtime Information structure -->
    <typedef name="osRtxInfo_t" info="OS Runtime Information" size="164">
      <member name="os_id"                      type="uint32_t"             offset="0" info="OS Identification (type is *uint8_t)"/>
      <member name="version"                    type="uint32_t"             offset="4" info="OS Version"/>
      <member name="kernel_state"               type="uint8_t"              offset="8" info="Kernel state">
        <enum name="osKernelInactive"  value="0"  info="Inactive"/>
        <enum name="osKernelReady"     value="1"  info="Ready"/>
        <enum name="osKernelRunning"   value="2"  info="Running"/>
        <enum name="osKernelLocked"    value="3"  info="Locked"/>
        <enum name="osKernelSuspended" value="4"  info="Suspended"/>
        <enum name="osKernelError"     value="5"  info="Error"/>
      </member>
      <member name="kernel_blocked"             type="uint8_t"              offset="9"  info="Kernel blocked"/>
      <member name="kernel_pendSV"              type="uint8_t"              offset="10" info="Kernel pending SV"/>
      <member name="kernel_protect"             type="uint8_t"              offset="11" info="Protect options"/>
      <member name="kernel_tick"                type="uint32_t"             offset="12" info="Kernel tick counter"/>
      <member name="tick_irqn"                  type="int32_t"              offset="16" info="Tick timer IRQ number"/>
      <member name="thread_run_curr"            type="*osRtxThread_t"       offset="20" info="Current running thread"/>
      <member name="thread_run_next"            type="*osRtxThread_t"       offset="24" info="Next thread to run"/>

      <!-- Inlined "osRtxObject_t" structure at offset: 28 -->
      <member name="thread_ready_id"            type="uint8_t"              offset="28+0" info="Object Identifier" />
      <member name="thread_ready_state"         type="uint8_t"              offset="28+1" info="Object State" />
      <member name="thread_ready_flags"         type="uint8_t"              offset="28+2" info="Object Flags" />
      <member name="thread_ready_attr"          type="uint8_t"              offset="28+3" info="Object Attributes"/>
      <member name="thread_ready_name"          type="uint32_t"             offset="28+4" info="Object Name (type is *uint8_t)" />
      <member name="thread_ready_thread_list"   type="*osRtxThread_t"       offset="28+8" info="Threads List" />

      <member name="thread_idle"                type="*osRtxThread_t"       offset="40"  info="Idle thread"/>
      <member name="thread_delay_list"          type="*osRtxThread_t"       offset="44"  info="Delay list"/>
      <member name="thread_wait_list"           type="*osRtxThread_t"       offset="48"  info="Wait list (no timeout)"/>
      <member name="thread_terminate_list"      type="*osRtxThread_t"       offset="52"  info="Terminate list"/>
      <member name="thread_wdog_list"           type="*osRtxThread_t"       offset="56"  info="Watchdog list"/>

      <member name="thread_robin_thread"        type="*osRtxThread_t"       offset="60"  info="Round Robin thread"/>
      <member name="thread_timeout"             type="uint32_t"             offset="64"  info="Round Robin timeout"/>

      <member name="timer_list"                 type="*osRtxTimer_t"        offset="68"  info="Active timer list"/>
      <member name="timer_thread"               type="*osRtxThread_t"       offset="72"  info="Timer thread"/>
      <member name="timer_mq"                   type="*osRtxMessageQueue_t" offset="76"  info="Timer message queue"/>
      <member name="timer_tick"                 type="uint32_t"             offset="80"  info="Timer tick function (type is func *)"/>

      <member name="isr_queue_max"              type="uint16_t"             offset="84"  info="Maximum items"/>
      <member name="isr_queue_cnt"              type="uint16_t"             offset="86"  info="Item count"/>
      <member name="isr_queue_in"               type="uint16_t"             offset="88"  info="Incoming item index"/>
      <member name="isr_queue_out"              type="uint16_t"             offset="90"  info="Outgoing item index"/>
      <member name="isr_queue_data"             type="uint32_t"             offset="92"  info="Queue data (type is void **)"/>

      <member name="post_process_thread"        type="uint32_t"             offset="96"  info="Thread post processing function (type is func *)"/>
      <member name="post_process_event_flags"   type="uint32_t"             offset="100" info="Event flags post processing function (type is func *)"/>
      <member name="post_process_semaphore"     type="uint32_t"             offset="104" info="Semaphore post processing function (type is func *)"/>
      <member name="post_process_memory_pool"   type="uint32_t"             offset="108" info="Memory pool post processing function (type is func *)"/>
      <member name="post_process_message_queue" type="uint32_t"             offset="112" info="Message queue post processing function (type is func *)"/>

      <member name="mem_stack"                  type="uint32_t"             offset="116" info="Stack memory (type is void *)"/>
      <member name="mem_mp_data"                type="uint32_t"             offset="120" info="Memory pool data memory (type is void *)"/>
      <member name="mem_mq_data"                type="uint32_t"             offset="124" info="Message queue Data memory (type is void *)"/>
      <member name="mem_common"                 type="uint32_t"             offset="128" info="Common memory address (type is void *)"/>

      <member name="mpi_stack"                  type="*osRtxMpInfo_t"       offset="132" info="Stack for threads"/>
      <member name="mpi_thread"                 type="*osRtxMpInfo_t"       offset="136" info="Thread control blocks"/>
      <member name="mpi_timer"                  type="*osRtxMpInfo_t"       offset="140" info="Timer control blocks"/>
      <member name="mpi_event_flags"            type="*osRtxMpInfo_t"       offset="144" info="Event flags control blocks"/>
      <member name="mpi_mutex"                  type="*osRtxMpInfo_t"       offset="148" info="Mutex control blocks"/>
      <member name="mpi_semaphore"              type="*osRtxMpInfo_t"       offset="152" info="Semaphore control blocks"/>
      <member name="mpi_memory_pool"            type="*osRtxMpInfo_t"       offset="156" info="Memory pool control blocks"/>
      <member name="mpi_message_queue"          type="*osRtxMpInfo_t"       offset="160" info="Message queue control blocks"/>

      <var name="robin_tick" type="uint32_t" info="Round Robin time tick (thread_robin_thread.delay)"/>
    </typedef>

  </typedefs>

  <objects>
    <object name="Test Object">
      <var name="R0" type="uint32_t" value="0x1"/>
      <var name="i" type="uint32_t" value="0"/>
      <var name="j" type="uint32_t" value="0"/>
      <var name="k" type="uint32_t" value="0"/>
      <var name="l" type="uint32_t" value="0"/>
      <var name="memberTest" type="memberTest_t" value="0x00000000"/>
      <var name="StackStart" type="uint32_t" value="0x00000000"/>
      <var name="StackSize" type="uint32_t" value="0x00000000"/>
      <var name="StackUsage" type="uint32_t" value="0x00000000"/>
      <var name="RTX_En" type="uint8_t" value="0" />


      <calc cond="1">
        RTX_En = 1;
      </calc>

      <calc>
        R0  = __GetRegVal ("R0");
        i = 0;
        j = 1;
        k = 2;
        l = 0;
      </calc>

      <calc>
        memberTest[j] = 0x44444444;
        memberTest[k] = 0x88888888;
        memberTest.m_var1 = 0x11111111;
        memberTest.a = 0x12;
        memberTest.b = 0x34;
        memberTest.c = 0x56;
        memberTest.d = 0x78;
        memberTest.sum = memberTest.d + (memberTest.c &lt;&lt; 8) + (memberTest.b &lt;&lt; 16) + (memberTest.a &lt;&lt; 24);
        memberTest.A = 0xAA;
        memberTest.B = 0xBB;
        memberTest.C = 0xCC;
        memberTest.D = 0xDD;
        memberTest.m_var2 = 0x22222222;
        memberTest.m_var3[i+l] = 0xAAAAAAAA;
        memberTest.m_var3[j+l] = 0xBBBBBBBB;
        memberTest.m_var3[k+l] = 0xCCCCCCCC;
      </calc>

      <calc>
        StackStart = __FindSymbol ("tstack");
        StackSize  = __size_of ("tstack") * 4;
        StackUsage = __CalcMemUsed (StackStart, StackSize, 0x8A8A8A8A, 0xE25A2EA5);
      </calc>

      <calc>
        memberTest._addr = 0xa1a1a1a1;
        memberTest[1]._addr = 0xb2b2b2b2;
      </calc>

      <calc>
        k = memberTest._addr;
        l = memberTest._count;
      </calc>

      <var name="V_Major" type="uint32_t" value="0"/>
      <var name="V_Minor" type="uint32_t" value="0"/>
      <var name="V_Patch" type="uint32_t" value="0"/>

      <read name="os_Info"   type="osRtxInfo_t"   symbol="osRtxInfo"/>
      <calc cond="1">
        V_Major =  os_Info.version / 10000000;
        V_Minor = (os_Info.version / 10000) % 1000;
        V_Patch =  os_Info.version % 10000;
      </calc>


      <!-- Read Thread Control Block -->
      <!--readlist cond="(mem_list_com[i].len &amp; 1) &amp;&amp; (mem_list_com[i].id == 0xF1)" name="TCB" type="osRtxThread_t" offset="addr" count="1" /-->

      <out name="MyTest">
          <item property="System" value="">
            <item property="Kernel ID"    value="RTX V%d[V_Major].%d[V_Minor].%d[V_Patch]" cond="RTX_En != 0"/>
          </item>

          <item property="Stack">
            <item property="StackStart"    value="%x[StackStart]"/>
            <item property="StackSize"     value="%x[StackSize]"/>
            <item property="StackUsage"    value="%d[StackUsage]"/>
            <item alert="(StackUsage >> 31)"    
              property="tstack @%x[StackStart] size=%x[StackSize]"
              value="Usage %x[StackUsage &amp; 0xFFFFF] %d[(StackUsage>>20) &amp; 0xFF]%%" />
          </item>

          <item property="Vars">
            <item property="R0"    value="%x[R0]"/>
            <item property="i"     value="%x[i]"/>
            <item property="j"     value="%x[j]"/>
            <item property="k"     value="%x[k]"/>
            <item property="l"     value="%x[l]"/>
          </item>

          <item property="memberTest addr">
            <item property="memberTest._addr"     value="%x[memberTest._addr]"/>
            <item property="memberTest[1]._addr"  value="%x[memberTest[1]._addr]"/>
          </item>

          <item property="memberTest offset">
            <item property="memberTest a"     value="%x[memberTest.a]"/>
            <item property="memberTest b"     value="%x[memberTest.b]"/>
            <item property="memberTest c"     value="%x[memberTest.c]"/>
            <item property="memberTest d"     value="%x[memberTest.d]"/>
          </item>
          
          <item property="memberTest no offset">
            <item property="memberTest A"     value="%x[memberTest.A]"/>
            <item property="memberTest B"     value="%x[memberTest.B]"/>
            <item property="memberTest C"     value="%x[memberTest.C]"/>
            <item property="memberTest D"     value="%x[memberTest.D]"/>
          </item>

          <item property="memberTest both arrified">
            <item property="memberTest[0].a"     value="%x[memberTest[0].a]"/>
            <item property="memberTest[0].b"     value="%x[memberTest[0].b]"/>
            <item property="memberTest[0].c"     value="%x[memberTest[0].c]"/>
            <item property="memberTest[0].d"     value="%x[memberTest[0].d]"/>

            <item property="memberTest[0].A"     value="%x[memberTest[0].A]"/>
            <item property="memberTest[0].B"     value="%x[memberTest[0].B]"/>
            <item property="memberTest[0].C"     value="%x[memberTest[0].C]"/>
            <item property="memberTest[0].D"     value="%x[memberTest[0].D]"/>
          </item>

          <item property="memberTest sum"   value="%x[memberTest.sum]"/>

          <item property="memberTest index array">
            <item property="memberTest idx i"  value="%x[memberTest[i]]"/>
            <item property="memberTest idx i+l"  value="%x[memberTest[i+l]]"/>

            <item property="memberTest idx j"  value="%x[memberTest[j]]"/>
            <item property="memberTest idx j+l"  value="%x[memberTest[j+l]]"/>

            <item property="memberTest idx k"  value="%x[memberTest[k]]"/>
            <item property="memberTest idx k+l"  value="%x[memberTest[k+l]]"/>
          </item>

          <item property="memberTest var">
            <item property="memberTest m_var1"  value="%x[memberTest.m_var1]"/>
            <item property="memberTest m_var2"  value="%x[memberTest.m_var2]"/>

            <item property="memberTest m_var3[0]"  value="%x[memberTest.m_var3[0]]"/>
            <item property="memberTest m_var3[1]"  value="%x[memberTest.m_var3[1]]"/>
            <item property="memberTest m_var3[2]"  value="%x[memberTest.m_var3[2]]"/>

            <item property="memberTest m_var3[i]"  value="%x[memberTest.m_var3[i]]"/>
            <item property="memberTest m_var3[j]"  value="%x[memberTest.m_var3[j]]"/>
            <item property="memberTest m_var3[k]"  value="%x[memberTest.m_var3[k]]"/>
          </item>

          <item property="String: true / false">
            <item property="i"  value="%x[i? &quot;true&quot; : &quot;false&quot;]"/>
            <item property="j"  value="%x[j? &quot;true&quot; : &quot;false&quot;]"/>
            <item property="k"  value="%x[k? &quot;true&quot; : &quot;false&quot;]"/>
            <item property="i+j"  value="%x[(i+j)? &quot;true&quot; : &quot;false&quot;]"/>
          </item>

      </out>
    </object>
  </objects>
</component_viewer>
